If you are upgrading both DHF and MarkLogic, you can upgrade them independently of each other as long as you are running at least the minimally supported version of MarkLogic Server for your current DHF version. (DHF versions from 2.0.4 to 4.1.0 require MarkLogic Server 9.0-5 or later.) If you are running an older version of MarkLogic Server, then you must upgrade MarkLogic Server before upgrading DHF.